#! /bin/bash 

figlet -S "H|dd3N UrL?! " -f lean  -w 200 | tr ' _/' ' _ = _ ' 


hiddenurls='HiddenURL'

echo " ----------------======-----------------"

if [ $# -ne 0 ];
then
	# We need to run the script without any parameters 
	
	echo -e "\a\a\a\a\a[[-]]USAGE : ./$0  \n-----------------------------------------------\n"
else
	# mkdir for the application outputs for keeping the user's work directory clean
	
	# Check the script directory exist or not
	if [ -d $hiddenurls ];
	then
	echo "Output directory Exists, Let's grab the urls : "
	else
	mkdir $hiddenurls
	echo -e "---Creating Directory for the script outputs\n\n\n"
	sleep 1
	fi
	

# User can choose the option to do the extraction of hidden URL 	
	echo -e "[==] Choose the option to do the spidering : \n[+] 1 -> Spider from website \n[+] 2 -> Extract the sites from offline files[Example : index.html]\n[=] q to exit "
	# Read the user input
	read inp
	

# After taking the option from the user, Script need to work accordingly : 
	
	# If user press 1 we need to do the web spidering with curl
	if (( "$inp" == 1 ));
	then
	read -p '[+] Enter the url : ' uin
	
	echo "start Spidering..." && sleep 1
	#creating a file for the input domain
	touch ./$hiddenurls/$uin.fae;
	curl $uin -L -i -s | tr '"' '\n' | tr "'" '\n' | grep -e '^https://' -e '^http://' -e'^//' -e '^*.*.*' | sort | uniq | tee -a $hiddenurls/$uin.fae;
	
	
	#If user press 2, we need to do the scrapping of url endpoints from file provided by the user.
	
	elif (( "$inp" == 2 ));
	then
	echo "Extracting url Endpoints from file..." && sleep 1
	echo "[+] Provide the path of the file to extract URL endpo1nts: "
	read uin
	
	sleep 1;
	#cat $uin | while read p ; do curl -sLi $p ;done >>$uin.fl;
	cat $uin | tr '"' '\n'  | tr "'" "\n" | grep -e '^https://' -e '^http://' -e'^//' -e '^*.*.*'  | sort | uniq >>$uin.fl1
	#cat $uin.fl |  tr '"' '\n' | tr "'" '\n' | grep -e '^https://' -e '^http://' -e'^//' -e '^*.*.*' | sort | uniq | tee -a $hiddenurls/$uin.fl1
	#cat $uin  | tr '"' '\n' | tr "'" '\n' | grep -e '^https://' -e '^http://' -e'^//' -e '^*.*.*' | sort | uniq | tee -a $hiddenurls/$uin.fl;
	
	
	# If the user press any other key, It will exit and writes to stdout - "BY3".
	
	  
	else 
	
	echo "BY3."
	
	exit 
	fi

fi

figlet -S "H|dd3N UrL?! __BY_ HPOPERS " -f lean  -w 200 | tr ' _/' ' _=_ '
